<!DOCTYPE html>

<!-- 인테리어 팁 => 입력 페이지 -->
<!-- 타임리프 설정 -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="">
        <meta name="description" content="">

        <title>글쓰기</title>

        <!-- CSS -->
        <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
        <link rel="stylesheet" th:href="@{/css/all.min.css}">
        <link rel="stylesheet" th:href="@{/css/animate.min.css}">
        <link rel="stylesheet" th:href="@{/css/YTPlayer.min.css}">
        <link rel="stylesheet" th:href="@{/css/slick.css}">
        <link rel="stylesheet" th:href="@{/css/structure.css}">
        <link rel="stylesheet" th:href="@{/css/main.css}"> 
        <link rel="stylesheet" th:href="@{/css/responsive.css}">
        <link th:href="@{/css/summernote/summernote-lite.css}" rel="stylesheet">
        
        <!-- font -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:100,300,400,500,600,700,800,900" rel="stylesheet">

        <!-- icons -->
        <link rel="icon" th:href="@{/images/ico/favicon.ico}"> 
        <link rel="apple-touch-icon" sizes="144x144" th:href="@{/images/ico/apple-touch-icon-precomposed.png}">
        <link rel="apple-touch-icon" sizes="114x114" th:href="@{/images/ico/apple-touch-icon-114-precomposed.png}">
        <link rel="apple-touch-icon" sizes="72x72" th:href="@{/images/ico/apple-touch-icon-72-precomposed.png}">
        <link rel="apple-touch-icon" sizes="57x57" th:href="@{/images/ico/apple-touch-icon-57-precomposed.png}">   
        <!-- icons -->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        
        <!-- 개인 css 설정 -->
        <link rel="stylesheet" th:href="@{/css/jy/jy.css}">
                        
    </head>
    <body> 
        <div id="preloader">
            <img th:src="@{/images/preloader.gif}" alt="Image" class="tr-preloader img-fluid">
        </div><!-- preloader -->
        
        <!-- 헤더 -->
        <div th:replace="/sections/header :: header"></div>
        <!-- 헤더 끝 -->
        
        <section class="breadcrumb-section" >
            <div class="container" style="padding-top:30px; padding-bottom:30px;">
                <h1>인테리어 팁</h1>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item">글쓰기</li>
                </ol>
            </div><!-- /.container -->
        </section><!-- /.breadcrumb-section --> 
        
        
		<!-- 노트 본문 -->
        <div class="sg-section">
          <form th:action='@{/tip/write}' method="post" enctype="multipart/form-data">
            <div class="section-content course-details bg-white ">
                <div class="container">
                    <div class="row justify-content-md-center">
                        <div class="col-lg-8">
                            <div class="sa-course">
                                <div class="course-info">
                                    
                                    <select class="category" name="category">
									  <option value="아파트" selected="selected" >아파트</option>
									  <option value="주택">주택</option>
									  <option value="빌라">빌라</option>
									  <option value="원룸">원룸</option>
									  <option value="오피스텔">오피스텔</option>
									  <option value="본인방">본인방</option>
									  <option value="거실">거실</option>
									  <option value="주방">주방</option>
									  <option value="화장실">화장실</option>
									  <option value="기타">기타</option>
									</select>
                                    
                                    <input type="text" placeholder="제목을 입력해주세요." class="writeTitle" name="tiptitle" id="tiptitle" required="required"/>
                                    <!--  <div id="summernote">
                                    노트 본문 창
                                  	</div> -->
                                  	<textarea id="summernote" name="tcontent"></textarea>
                                	
                                </div>
                                <div class="t_submitdiv" >
                                <button class="btn btn-primary" type="submit" id="submitButton">게시하기</button>
                                </div>
                            </div><!-- /.sa-course -->                           
                        </div>
					</div>
				</div>
			</div>
		  </form>
		</div>
		<!-- 노트 끝 -->
		
		<!-- 푸터 -->
        <div th:replace="/sections/footer :: footer"></div>
		<!-- 푸터 끝 -->
		
        <!-- JS -->
        <script th:src="@{/js/jquery.min.js}"></script>
        <script th:src="@{/js/popper.min.js}"></script>
        <script th:src="@{/js/bootstrap.min.js}"></script>  
        <script th:src="@{/js/inview.min.js}"></script> 
        <script th:src="@{/js/slick.min.js}"></script>
        <script th:src="@{/js/jquery-ui-min.js}"></script>  
        <script th:src="@{/js/jarallax.min.js}"></script>  
        <script th:src="@{/js/counterup.min.js}"></script> 
        <script th:src="@{/js/waypoints.min.js}"></script> 
        <script th:src="@{/js/YTPlayer.min.js}"></script> 
        <script th:src="@{/js/jquery-ui-min.js}"></script>
        <script th:src="@{/js/validate.js}"></script>
        <script th:src="@{/js/main.js}"></script> 
        <script th:src="@{/js/summernote/summernote-lite.js}"></script>
        <script th:src="@{/js/summernote/lang/summernote-ko-KR.js}"></script>
        
        <!-- 노트 summernote js -->
        <script type="text/javascript">
        $(document).ready(function(){ 
        	var currentPosition = parseInt($(".quickmenu").css("top")); 
        	
        	$(window).scroll(function() { 
        		var position = $(window).scrollTop(); 
        		$(".quickmenu").css("top",position+currentPosition+"px"); 
        		});
        	
        	
            $('#summernote').summernote({
                placeholder: 'Hello Bootstrap 4',
                tabsize: 2,
                minHeight: 500,
                toolbar: [
    			    // [groupName, [list of button]]
    			    ['fontname', ['fontname']],
    			    ['fontsize', ['fontsize']],
    			    ['style', ['bold', 'italic', 'underline','strikethrough', 'clear']],  
    			    ['table', ['table']],
    			    ['para', ['ul', 'ol', 'paragraph']],
    			    ['height', ['height']],
    			    ['insert',['picture','link','video']],
    			    ['view', ['fullscreen', 'help']]
    			  ],
    			fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New','맑은 고딕','궁서','굴림체','굴림','돋움체','바탕체'],
    			fontSizes: ['8','9','10','11','12','14','16','18','20','22','24','28','30','36','50','72'],
                focus: true,
                lang: 'ko-KR',
                placeholder:'최대 2048자까지 쓸 수 있습니다.',
                 callbacks:{
                    onImageUpload: function(files, editor, welEditable) {
          			for( let i = files.length - 1; i >= 0; i--) {
          				sendFile(files[i], this);
          			   }
          			}
                 }
              });
            
            
         // uuid 생성
			function uuid(file_nm) {
        		function s4() {
        		     return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);
        		   }
        		   return s4() + s4() + s4() + s4() + s4() + s4() + s4() + s4() + file_nm.substr(file_nm.indexOf("."), file_nm.length-1).toLowerCase();
        		}

			// summernote 이미지 저장
			function sendFile(file, el) {
				let formData = new FormData();
				formData.append('file', file, uuid(file.name));
				console.log("uuid 적용확인: ", formData.get('file').name);
				$.ajax({
					type: "POST",
					url: "http://140.238.11.118:5000/upload",
					data: formData,
					processData: false,
					contentType: false,
					success: function(result) {
						console.log("result 값 확인: ",  formData.get('file').name);
						$(el).summernote('insertImage', 'http://140.238.11.118:5000/upload/'+result );
						$('#imageBoard > ul').append('<img src="'+result+'" width="auto" height="auto"/>');
						console.log("성공");
					},
					err: function(err) {
						console.log("에러: ", err)
					}
				})
			}
			
			
			
        	});
        	</script>
        
    </body>
</html>        